<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>–ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <h1>üí≥ –ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è</h1>
  <div id="cards-container"></div>

  <script>
    fetch('/api/cards')
      .then(res => res.json())
      .then(data => {
        const container = document.getElementById('cards-container');
        data.forEach(card => {
          const div = document.createElement('div');
          div.className = 'card';
          div.innerHTML = `
            <h2>${card.bank}</h2>
            <p>–ü—Ä–æ—Ü–µ–Ω—Ç: ${card.rate}%</p>
            <p>–°—Ä–æ–∫: ${card.term} –º–µ—Å.</p>
            <button onclick="sendToTelegram('${card.bank}', ${card.rate}, ${card.term})">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ Telegram</button>
          `;
          container.appendChild(div);
        });
      });

    function sendToTelegram(bank, rate, term) {
      fetch('/send-to-telegram', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ bank, rate, term })
      })
      .then(res => res.text())
      .then(msg => alert(msg))
      .catch(err => alert('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏'));
    }
  </script>
</body>
</html>
